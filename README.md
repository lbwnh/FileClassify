# FileClassify

ä½¿ç”¨åƒé—®3bå¯¹é€‰ä¸­æ–‡ä»¶å¤¹ä¸­æ–‡ä»¶è¿›è¡Œåˆ†ç±»ï¼Œæ‡’äººå¿…å¤‡

ä¸€ä¸ªåŸºäº PySide6 çš„æ™ºèƒ½æ–‡ä»¶åˆ†ç±»å·¥å…·ï¼Œé‡‡ç”¨æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼è§£æå’Œæœ¬åœ° LLM æ¨ç†ã€‚

## ç‰¹æ€§

- ğŸ¨ **ç°ä»£åŒ– GUI**ï¼šåŸºäº PySide6 çš„å“åº”å¼ç•Œé¢ï¼Œæ”¯æŒå¼‚æ­¥æ–‡ä»¶åŠ è½½
- ğŸ”Œ **æ’ä»¶åŒ–æ¶æ„**ï¼šå¯æ‰©å±•çš„æ–‡ä»¶è§£æå™¨å’Œ LLM åç«¯
- ğŸ¤– **AI é©±åŠ¨åˆ†ç±»**ï¼šä½¿ç”¨æœ¬åœ° LLMï¼ˆllama-cpp-pythonï¼‰è¿›è¡Œæ™ºèƒ½æ–‡ä»¶åˆ†ç±»
- ğŸ“ **å¤šæ ¼å¼æ”¯æŒ**ï¼šPDF, DOCX, XLSX, PPTX, TXT, MD åŠä»£ç æ–‡ä»¶
- ğŸ¯ **æšä¸¾çº¦æŸ**ï¼šæ”¯æŒè§„åˆ™ä¸­çš„é€‰é¡¹çº¦æŸï¼Œæé«˜åˆ†ç±»å‡†ç¡®æ€§
- ğŸ”„ **å±‚çº§ç»“æ„**ï¼šä½¿ç”¨ `>>` ç¬¦å·åˆ›å»ºå¤šçº§æ–‡ä»¶å¤¹ç»“æ„
- âš¡ **é«˜æ€§èƒ½**ï¼šåå°çº¿ç¨‹å¤„ç†ï¼ŒUI ä¸å†»ç»“

---

## æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
FileClassify/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main.py              # GUI ä¸»ç¨‹åºï¼ˆPySide6ï¼‰
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ parsers/             # æ–‡ä»¶è§£æå™¨æ’ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ base.py          # BaseParser æŠ½è±¡åŸºç±»
â”‚   â”‚   â”œâ”€â”€ pdf_parser.py    # PDF è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ docx_parser.py   # Word æ–‡æ¡£è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ excel_parser.py  # Excel/CSV è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ pptx_parser.py   # PowerPoint è§£æå™¨
â”‚   â”‚   â””â”€â”€ text_parser.py   # æ–‡æœ¬/ä»£ç è§£æå™¨
â”‚   â”œâ”€â”€ llm/                 # LLM æŠ½è±¡å±‚
â”‚   â”‚   â”œâ”€â”€ base.py          # BaseLLM æŠ½è±¡åŸºç±»
â”‚   â”‚   â””â”€â”€ local_llama.py   # llama-cpp-python å®ç°
â”‚   â”œâ”€â”€ utils.py             # è§„åˆ™è§£æå’Œè·¯å¾„ç”Ÿæˆ
â”‚   â””â”€â”€ ai_engine.py         # AI æç¤ºå·¥ç¨‹
â””â”€â”€ tests/                   # å•å…ƒæµ‹è¯•
```

### æ ¸å¿ƒæ¨¡å—

#### 1. GUI å±‚ï¼ˆ`src/main.py`ï¼‰
- **å·¦ä¾§é¢æ¿**ï¼šæ–‡ä»¶æ ‘è§†å›¾ï¼Œæ”¯æŒç™½åå•è¿‡æ»¤å’Œç©ºæ–‡ä»¶å¤¹å‰ªæ
- **å³ä¾§é¢æ¿**ï¼šç›®æ ‡æ–‡ä»¶å¤¹é€‰æ‹©ã€è§„åˆ™è¾“å…¥ã€ç»“æœé¢„è§ˆ
- **å¼‚æ­¥åŠ è½½**ï¼š`TreeLoaderWorker` åå°æ‰«æï¼Œä¸é˜»å¡ UI
- **çŠ¶æ€æ **ï¼šå®æ—¶æ˜¾ç¤ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç»Ÿè®¡

#### 2. è§£æå™¨æ’ä»¶ç³»ç»Ÿï¼ˆ`core/parsers/`ï¼‰
- **BaseParser**ï¼šå®šä¹‰ç»Ÿä¸€æ¥å£ï¼ˆ`extract_text()`, `extract_metadata()`ï¼‰
- **ParserFactory**ï¼šæ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨é€‰æ‹©è§£æå™¨
- **æ”¯æŒæ ¼å¼**ï¼š20+ æ–‡ä»¶æ‰©å±•å
- **å¯æ‰©å±•**ï¼šé€šè¿‡ `register_parser()` æ·»åŠ è‡ªå®šä¹‰è§£æå™¨

#### 3. LLM æŠ½è±¡å±‚ï¼ˆ`core/llm/`ï¼‰
- **BaseLLM**ï¼šå®šä¹‰æ ‡å‡†æ¥å£ï¼ˆ`generate()`, `classify()`, `extract_json()`ï¼‰
- **LocalLlamaLLM**ï¼šllama-cpp-python å®ç°ï¼Œæ”¯æŒ GGUF æ¨¡å‹
- **å¯æ’æ‹”**ï¼šè½»æ¾åˆ‡æ¢åˆ° OpenAIã€Claude ç­‰å…¶ä»–åç«¯

#### 4. è§„åˆ™å¼•æ“ï¼ˆ`core/utils.py`ï¼‰
- **å±‚çº§å‘½ä»¤**ï¼š`ç±»å‹ >> å¹´ä»½ >> æœˆä»½` åˆ›å»ºå¤šçº§ç›®å½•
- **æšä¸¾çº¦æŸ**ï¼š`ç±»å‹ [åˆåŒ, å‘ç¥¨, æ‰‹å†Œ]` é™åˆ¶åˆ†ç±»é€‰é¡¹
- **åŠ¨æ€æç¤º**ï¼šæ ¹æ®çº¦æŸç”Ÿæˆä¼˜åŒ–çš„ AI æç¤º

---

## å½“å‰è¿›åº¦

### âœ… å·²å®ŒæˆåŠŸèƒ½

#### Phase 1: åŸºç¡€æ¶æ„ï¼ˆ100%ï¼‰
- [x] PySide6 GUI æ¡†æ¶
- [x] åˆ†å‰²é¢æ¿å¸ƒå±€ï¼ˆå·¦ 40% / å³ 60%ï¼‰
- [x] æ–‡ä»¶å¤¹é€‰æ‹©å’Œè·¯å¾„æ˜¾ç¤º
- [x] ç©ºçŠ¶æ€å’Œæ´»åŠ¨çŠ¶æ€åˆ‡æ¢

#### Phase 2: æ–‡ä»¶ç®¡ç†ï¼ˆ100%ï¼‰
- [x] æ–‡ä»¶æ ‘è§†å›¾ï¼ˆQTreeWidgetï¼‰
- [x] ç™½åå•æ‰©å±•åè¿‡æ»¤
- [x] ç©ºæ–‡ä»¶å¤¹å‰ªæï¼ˆClean Viewï¼‰
- [x] åå°æ–‡ä»¶è®¡æ•°ï¼ˆQThreadï¼‰
- [x] å¼‚æ­¥æ–‡ä»¶åŠ è½½ï¼ˆTreeLoaderWorkerï¼‰
- [x] åŠ è½½è¿›åº¦æŒ‡ç¤ºå™¨

#### Phase 3: è§„åˆ™ç³»ç»Ÿï¼ˆ100%ï¼‰
- [x] å±‚çº§å‘½ä»¤è§£æï¼ˆ`>>` ç¬¦å·ï¼‰
- [x] æšä¸¾çº¦æŸè§£æï¼ˆ`[é€‰é¡¹1, é€‰é¡¹2]`ï¼‰
- [x] ä¸­è‹±æ–‡é€—å·æ”¯æŒ
- [x] åŠ¨æ€è·¯å¾„ç”Ÿæˆ
- [x] è§„åˆ™éªŒè¯å’Œæµ‹è¯•

#### Phase 4: æ’ä»¶åŒ–æ¶æ„ï¼ˆ100%ï¼‰
- [x] BaseParser æŠ½è±¡åŸºç±»
- [x] 5 ä¸ªæ–‡ä»¶è§£æå™¨å®ç°
- [x] ParserFactory å·¥å‚æ¨¡å¼
- [x] BaseLLM æŠ½è±¡åŸºç±»
- [x] LocalLlamaLLM å®ç°
- [x] æ¨¡å—è§£è€¦å’Œç‹¬ç«‹æµ‹è¯•

#### Phase 5: AI é›†æˆï¼ˆ80%ï¼‰
- [x] ç³»ç»Ÿæç¤ºå·¥ç¨‹
- [x] åŠ¨æ€æç¤ºç”Ÿæˆï¼ˆæšä¸¾çº¦æŸï¼‰
- [x] JSON æå–æ¥å£
- [x] åˆ†ç±»æ¥å£
- [ ] LLM æ¨¡å‹åŠ è½½å’Œæ¨ç†ï¼ˆå¾…é›†æˆï¼‰
- [ ] æ‰¹é‡æ–‡ä»¶å¤„ç†ï¼ˆå¾…å®ç°ï¼‰

### ğŸš§ è¿›è¡Œä¸­

- [ ] **LLM æ¨¡å‹é›†æˆ**ï¼šåŠ è½½ GGUF æ¨¡å‹å¹¶è¿›è¡Œå®é™…æ¨ç†
- [ ] **æ‰¹é‡å¤„ç†**ï¼šå®ç° "å¼€å§‹è½¬æ¢" æŒ‰é’®çš„å®Œæ•´é€»è¾‘
- [ ] **ç»“æœé¢„è§ˆ**ï¼šåœ¨å³ä¾§é¢æ¿æ˜¾ç¤ºåˆ†ç±»å»ºè®®
- [ ] **æ–‡ä»¶ç§»åŠ¨**ï¼šæ‰§è¡Œå®é™…çš„æ–‡ä»¶é‡ç»„æ“ä½œ

### ğŸ“‹ å¾…å¼€å‘

- [ ] **é…ç½®ç®¡ç†**ï¼šä¿å­˜ç”¨æˆ·è®¾ç½®å’Œè§„åˆ™æ¨¡æ¿
- [ ] **å†å²è®°å½•**ï¼šè®°å½•åˆ†ç±»å†å²å’Œæ’¤é”€åŠŸèƒ½
- [ ] **å¤šè¯­è¨€æ”¯æŒ**ï¼šå›½é™…åŒ–ï¼ˆi18nï¼‰
- [ ] **äº‘ç«¯ LLM**ï¼šæ”¯æŒ OpenAIã€Claude ç­‰ API
- [ ] **æ’ä»¶å¸‚åœº**ï¼šç¤¾åŒºè´¡çŒ®çš„è§£æå™¨å’Œè§„åˆ™

---

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

**æ ¸å¿ƒä¾èµ–ï¼š**
- `PySide6>=6.5.0` - GUI æ¡†æ¶
- `pyinstaller>=6.0.0` - æ‰“åŒ…å·¥å…·

**å¯é€‰ä¾èµ–ï¼ˆæ–‡ä»¶è§£æï¼‰ï¼š**
```bash
pip install PyPDF2 python-docx openpyxl python-pptx pandas
```

**å¯é€‰ä¾èµ–ï¼ˆLLMï¼‰ï¼š**
```bash
pip install llama-cpp-python
```

### è¿è¡Œç¨‹åº

```bash
python src/main.py
```

### ä½¿ç”¨ç¤ºä¾‹

1. **é€‰æ‹©æºæ–‡ä»¶å¤¹**ï¼šç‚¹å‡»å·¦ä¾§ "é€‰æ‹©æ–‡ä»¶å¤¹" æŒ‰é’®
2. **é€‰æ‹©ç›®æ ‡æ–‡ä»¶å¤¹**ï¼šç‚¹å‡»å³ä¾§ "é€‰æ‹©..." æŒ‰é’®
3. **è¾“å…¥åˆ†ç±»è§„åˆ™**ï¼š
   ```
   ç±»å‹ [åˆåŒ, å‘ç¥¨, æŠ¥å‘Š] >> å¹´ä»½ >> æœˆä»½
   ```
4. **ç‚¹å‡» "å¼€å§‹è½¬æ¢"**ï¼šæŸ¥çœ‹åˆ†ç±»å»ºè®®

---

## ç¼–è¯‘æˆ .exe å¯æ‰§è¡Œæ–‡ä»¶

### æ–¹æ³• 1ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæ¨èï¼‰
åŒå‡»è¿è¡Œ `build.bat` æ–‡ä»¶ï¼Œæˆ–åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š
```bash
build.bat
```

### æ–¹æ³• 2ï¼šæ‰‹åŠ¨ç¼–è¯‘
```bash
pip install pyinstaller
pyinstaller --name=FileClassify --windowed --onefile src/main.py
```

ç¼–è¯‘å®Œæˆåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äº `dist/FileClassify.exe`

---

## å¼€å‘æŒ‡å—

### æ·»åŠ è‡ªå®šä¹‰è§£æå™¨

```python
from core.parsers import BaseParser, ParserFactory

class CustomParser(BaseParser):
    def extract_text(self):
        # å®ç°æ–‡æœ¬æå–é€»è¾‘
        return "extracted text"
    
    def extract_metadata(self):
        # å®ç°å…ƒæ•°æ®æå–é€»è¾‘
        return {"author": "John Doe"}

# æ³¨å†Œè§£æå™¨
ParserFactory.register_parser('.custom', CustomParser)
```

### æ·»åŠ è‡ªå®šä¹‰ LLM åç«¯

```python
from core.llm import BaseLLM

class OpenAILLM(BaseLLM):
    def generate(self, prompt, system_prompt=None, **kwargs):
        # è°ƒç”¨ OpenAI API
        pass
    
    def classify(self, text, options, system_prompt=None):
        # å®ç°åˆ†ç±»é€»è¾‘
        pass
    
    def extract_json(self, prompt, system_prompt=None):
        # å®ç° JSON æå–
        pass
```

### è¿è¡Œæµ‹è¯•

```bash
# æµ‹è¯•è§„åˆ™è§£æ
python tests/test_utils.py

# æµ‹è¯•æšä¸¾çº¦æŸ
python tests/test_enum_constraints.py

# æµ‹è¯•æ¨¡å—åŒ–æ¶æ„
python tests/test_modular_architecture.py
```

---

## æŠ€æœ¯æ ˆ

- **GUI**: PySide6 (Qt for Python)
- **LLM**: llama-cpp-python (æœ¬åœ°æ¨ç†)
- **æ–‡ä»¶è§£æ**: PyPDF2, python-docx, openpyxl, python-pptx
- **å¼‚æ­¥å¤„ç†**: QThread (Qt å¤šçº¿ç¨‹)
- **æ‰“åŒ…**: PyInstaller

---

## è®¸å¯è¯

MIT License

---

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æŒ‡å—
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## è”ç³»æ–¹å¼

GitHub: [https://github.com/lbwnh/FileClassify](https://github.com/lbwnh/FileClassify)
